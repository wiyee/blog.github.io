<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="wiyee" />


    
    


<meta name="description" content="说来惭愧，一点微小的事情都没做。">
<meta property="og:type" content="website">
<meta property="og:title" content="wiyee&#39;s blog">
<meta property="og:url" content="yiyu.site/index.html">
<meta property="og:site_name" content="wiyee&#39;s blog">
<meta property="og:description" content="说来惭愧，一点微小的事情都没做。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wiyee&#39;s blog">
<meta name="twitter:description" content="说来惭愧，一点微小的事情都没做。">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="wiyee&#39;s blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>wiyee&#39;s blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">wiyee</a></h1>
        </hgroup>

        
        <p class="header-subtitle">learn and live.</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:wyygoup@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" href="https://www.weibo.com/heitom" title="新浪微博"></a>
                            
                                <a class="fa GitHub" href="https://github.com/wiyee" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 网易云音乐" href="http://music.163.com/#/user/home?id=334253922" title="网易云音乐"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/deep-learning/">deep learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/numpy/">numpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/regression/">regression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/">vmware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大数据/">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/论文/">论文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集群/">集群</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">wiyee</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">wiyee</a></h1>
            </hgroup>
            
            <p class="header-subtitle">learn and live.</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:wyygoup@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="https://www.weibo.com/heitom" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/wiyee" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 网易云音乐" target="_blank" href="http://music.163.com/#/user/home?id=334253922" title="网易云音乐"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-粒子群算法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/粒子群算法/" class="article-date">
      <time datetime="2017-06-20T07:13:34.105Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/粒子群算法/">粒子群算法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>微粒群算法，是由J. Kennedy和R. C. Eberhart等于1995年开发的一种演化计算技术，来源于对一个简化社会模型的模拟。其中“群（swarm）”来源于微粒群符合M. M. Millonas在开发应用于人工生命（artificial life）的模型时所提出的群体智能的5个基本原则。“粒子（particle）”是一个折衷的选择，因为既需要将群体中的成员描述为没有质量、没有体积的，同时也需要描述它的速度和加速状态。</p>
<p>PSO算法最初是为了图形化的模拟鸟群优美而不可预测的运动。而通过对动物社会行为的观察，发现在群体中对信息的社会共享提供一个演化的优势，并以此作为开发算法的基础。通过加入近邻的速度匹配、并考虑了多维搜索和根据距离的加速，形成了PSO的最初版本。之后引入了惯性权重w来更好的控制开发（exploitation）和探索（exploration），形成了标准版本。为了提高粒群算法的性能和实用性，中山大学、（英国）格拉斯哥大学等又开发了自适应版本（Adaptive PSO）.[1]</p>
<h2 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h2><p>PSO算法是基于群体的，根据对环境的适应度将群体中的个体移动到好的区域。然而它不对个体使用演化算子，而是将每个个体看作是D维搜索空间中的一个没有体积的微粒（点），在搜索空间中以一定的速度飞行，这个速度根据它本身的飞行经验和同伴的飞行经验来动态调整。第i个微粒表示为Xi = （xi1, xi2, …, xiD），它经历过的最好位置（有最好的适应值）记为Pi = （pi1, pi2, …, piD），也称为pbest。在群体所有微粒经历过的最好位置的索引号用符号g表示，即Pg，也称为gbest。微粒i的速度用Vi = （vi1, vi2, …, viD）表示。对每一代，它的第d维（1 ≤ d ≤ D）根据如下方程进行变化：</p>
<pre><code>vid = w∙vid+c1∙rand（）∙（pid-xid）+c2∙Rand（）∙（pgd-xid）   （1a）
xid = xid+vid                                               （1b）
</code></pre><p>其中w为惯性权重（inertia weight），c1和c2为加速常数（acceleration constants），rand（）和Rand（）为两个在[0,1]范围里变化的随机值。</p>
<p>此外，微粒的速度Vi被一个最大速度Vmax所限制。如果当前对微粒的加速导致它的在某维的速度vid超过该维的最大速度vmax,d，则该维的速度被限制为该维最大速度vmax,d。</p>
<p>对公式（1a），第一部分为微粒先前行为的惯性，第二部分为“认知（cognition）”部分，表示微粒本身的思考；第三部分为“社会（social）”部分，表示微粒间的信息共享与相互合作。</p>
<p>“认知”部分可以由Thorndike的效应法则（law of effect）所解释，即一个得到加强的随机行为在将来更有可能出现。这里的行为即“认知”，并假设获得正确的知识是得到加强的，这样的一个模型假定微粒被激励着去减小误差。</p>
<p>“社会”部分可以由Bandura的替代强化（vicarious reinforcement）所解释。根据该理论的预期，当观察者观察到一个模型在加强某一行为时，将增加它实行该行为的几率。即微粒本身的认知将被其它微粒所模仿。</p>
<p>PSO算法使用如下心理学假设：在寻求一致的认知过程中，个体往往记住自身的信念，并同时考虑同事们的信念。当其察觉同事的信念较好的时候，将进行适应性地调整。</p>
<p>标准PSO的算法流程如下：</p>
<p>初始化一群微粒（群体规模为m），包括随机的位置和速度；<br>评价每个微粒的适应度；<br>对每个微粒，将它的适应值和它经历过的最好位置pbest的作比较，如果较好，则将其作为当前的最好位置pbest；<br>对每个微粒，将它的适应值和全局所经历最好位置gbest的作比较，如果较好，则重新设置gbest的索引号；<br>根据方程（1）变化微粒的速度和位置；<br>如未达到结束条件（通常为足够好的适应值或达到一个预设最大代数Gmax），回到2）。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/最优化算法/">最优化算法</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Ubuntu命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/Ubuntu命令/" class="article-date">
      <time datetime="2017-06-20T07:13:34.079Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/Ubuntu命令/">ubuntu常用命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h5 id="创建、删除文件及文件夹，强行清空回收站"><a href="#创建、删除文件及文件夹，强行清空回收站" class="headerlink" title="创建、删除文件及文件夹，强行清空回收站"></a>创建、删除文件及文件夹，强行清空回收站</h5><pre><code>mkdir 目录名         =&gt; 创建一个目录
rmdir 空目录名      =&gt; 删除一个空目录
rm 文件名 文件名   =&gt; 删除一个文件或多个文件
rm –rf 非空目录名 =&gt; 删除一个非空目录下的一切
touch 文件名        =&gt; 创建一个空文件
</code></pre><h5 id="重命名文件（夹）-移动文件（夹）到指定文件夹"><a href="#重命名文件（夹）-移动文件（夹）到指定文件夹" class="headerlink" title="重命名文件（夹） / 移动文件（夹）到指定文件夹"></a>重命名文件（夹） / 移动文件（夹）到指定文件夹</h5><pre><code>mv file1 file2    =&gt;    将文件 file1，更改文件名为 file2。

mv file1 dir1     =&gt;    将文件 file1，移到目录 dir1下，文件名仍为 file1。

mv dir1 dir2      =&gt;    若目录 dir2 存在，则将目录 dir1，及其所有文件和子目录，移到目录 dir2 下，新目录名称为 dir1。若目录 dir2 不存在，则将dir1，及其所有文件和子目录，更改为目录 dir2。
</code></pre><h5 id="强制清空回收站"><a href="#强制清空回收站" class="headerlink" title="强制清空回收站"></a>强制清空回收站</h5><pre><code>ubuntu8.04以前的版本
sudo rm -fr $HOME/.Trash/*
ubuntu 8.04
sudo rm -fr $HOME/.local/share/Trash/files/*
</code></pre><h5 id="创建角色"><a href="#创建角色" class="headerlink" title="创建角色"></a>创建角色</h5><p>$是普通管员，#是系统管理员，在Ubuntu下，root用户默认是没有密码的，因此也就无法使用（据说是为了安全）。想用root的话，得给root用户设置一个密码：</p>
<pre><code>sudo passwd root
</code></pre><p>然后登录时用户名输入root，再输入密码就行了。<br>ubuntu建用户最好用adduser，虽然adduser和useradd是一样的在别的linux糸统下，但是我在ubuntu下用useradd时，并没有创建同名的用户主目录。</p>
<pre><code>例子：adduser user1
</code></pre><p>这样他就会自动创建用户主目录，创建用户同名的组。</p>
<pre><code>root@ubuntu:~# sudo adduser linuxidc
[sudo] password for xx:
输入xx用户的密码，出现如下信息
正在添加用户&quot;linuxidc&quot;…
正在添加新组&quot;linuxidc&quot; (1006)…
正在添加新用户&quot;linuxidc&quot; (1006) 到组&quot;linuxidc&quot;…
创建主目录&quot;/home/linuxidc&quot;…
正在从&quot;/etc/skel&quot;复制文件…
输入新的 UNIX 口令：
重新输入新的 UNIX 口令：
两次输入linuxidc的初始密码，出现的信息如下
passwd: password updated successfully
Changing the user information for linuxidc
Enter the new value, or press ENTER for the default
Full Name []:
Room Number []:
Work Phone []:
Home Phone []:
Other []:
Full Name []:等信息一路回车
这个信息是否正确？ [Y/n] y
</code></pre><p>到此，用户添加成功。如果需要让此用户有root权限，执行命令：</p>
<pre><code>root@ubuntu:~# sudo vim /etc/sudoers
</code></pre><p>修改文件如下：</p>
<pre><code># User privilege specification
root ALL=(ALL) ALL
linuxidc ALL=(ALL) ALL
</code></pre><p>保存退出，linuxidc用户就拥有了root权限。</p>
<p>删除：<br>    终端方法：以下用newuser代替想要删除的用户账户<br>    在root用户下：userdel -r newuser<br>    在普通用户下：sudo userdel -r newuser<br>    因为你需要彻底删除用户，所以加上-r的选项，在删除用户的同时一起把这个用户的宿主目录和邮件目录删除。</p>
<h5 id="进入用户"><a href="#进入用户" class="headerlink" title="进入用户"></a>进入用户</h5><pre><code>sudo su user
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ubuntu/">ubuntu</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ubuntu ssh" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/ubuntu ssh/" class="article-date">
      <time datetime="2017-06-20T07:13:34.074Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/ubuntu ssh/">ubuntu配置ssh</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="ssh配置"><a href="#ssh配置" class="headerlink" title="ssh配置"></a>ssh配置</h2><h3 id="更新源列表"><a href="#更新源列表" class="headerlink" title="更新源列表"></a>更新源列表</h3><p>打开”终端窗口”，输入”sudo apt-get update”–&gt;回车–&gt;”输入当前登录用户的管理员密码”–&gt;回车,就可以了。</p>
<h3 id="安装ssh"><a href="#安装ssh" class="headerlink" title="安装ssh"></a>安装ssh</h3><p>打开”终端窗口”，输入”sudo apt-get install openssh-server”–&gt;回车–&gt;输入”y”–&gt;回车–&gt;安装完成。</p>
<h3 id="查看ssh服务是否启动"><a href="#查看ssh服务是否启动" class="headerlink" title="查看ssh服务是否启动"></a>查看ssh服务是否启动</h3><p>打开”终端窗口”，输入”sudo ps -e |grep ssh”–&gt;回车–&gt;有sshd,说明ssh服务已经启动，如果没有启动，输入”sudo service ssh start”–&gt;回车–&gt;ssh服务就会启动。</p>
<h3 id="使用gedit修改配置文件”-etc-ssh-sshd-config”"><a href="#使用gedit修改配置文件”-etc-ssh-sshd-config”" class="headerlink" title="使用gedit修改配置文件”/etc/ssh/sshd_config”"></a>使用gedit修改配置文件”/etc/ssh/sshd_config”</h3><h4 id="gedit需要安装"><a href="#gedit需要安装" class="headerlink" title="gedit需要安装"></a>gedit需要安装</h4><p>打开”终端窗口”，输入”sudo gedit /etc/ssh/sshd_config”–&gt;回车–&gt;把配置文件中的”PermitRootLogin without-password”加一个”#”号,把它注释掉–&gt;再增加一句”PermitRootLogin yes”–&gt;保存，修改成功。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ubuntu/">ubuntu</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssh/">ssh</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-TensorFlow学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/TensorFlow学习/" class="article-date">
      <time datetime="2017-06-20T07:13:34.070Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/TensorFlow学习/">TensorFlow学习入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>TensorFlow™ 是一个采用数据流图（data flow graphs），用于数值计算的开源软件库。节点（Nodes）在图中表示数学操作，图中的线（edges）则表示在节点间相互联系的多维数据数组，即张量（tensor）。它灵活的架构让你可以在多种平台上展开计算，例如台式计算机中的一个或多个CPU（或GPU），服务器，移动设备等等。TensorFlow 最初由Google大脑小组（隶属于Google机器智能研究机构）的研究员和工程师们开发出来，用于机器学习和深度神经网络方面的研究，但这个系统的通用性使其也可广泛用于其他计算领域。</p>
<h3 id="什么是数据流图（Data-Flow-Graph）"><a href="#什么是数据流图（Data-Flow-Graph）" class="headerlink" title="什么是数据流图（Data Flow Graph）?"></a>什么是数据流图（Data Flow Graph）?</h3><p>数据流图用“结点”（nodes）和“线”(edges)的有向图来描述数学计算。“节点” 一般用来表示施加的数学操作，但也可以表示数据输入（feed in）的起点/输出（push out）的终点，或者是读取/写入持久变量（persistent variable）的终点。“线”表示“节点”之间的输入/输出关系。这些数据“线”可以输运“size可动态调整”的多维数据数组，即“张量”（tensor）。张量从图中流过的直观图像是这个工具取名为“Tensorflow”的原因。一旦输入端的所有张量准备好，节点将被分配到各种计算设备完成异步并行地执行运算。</p>
<h3 id="TensorFlow的特征"><a href="#TensorFlow的特征" class="headerlink" title="TensorFlow的特征"></a>TensorFlow的特征</h3><h4 id="高度的灵活性"><a href="#高度的灵活性" class="headerlink" title="高度的灵活性"></a>高度的灵活性</h4><p>TensorFlow 不是一个严格的“神经网络”库。只要你可以将你的计算表示为一个数据流图，你就可以使用Tensorflow。你来构建图，描写驱动计算的内部循环。我们提供了有用的工具来帮助你组装“子图”（常用于神经网络），当然用户也可以自己在Tensorflow基础上写自己的“上层库”。定义顺手好用的新复合操作和写一个python函数一样容易，而且也不用担心性能损耗。当然万一你发现找不到想要的底层数据操作，你也可以自己写一点c++代码来丰富底层的操作。</p>
<h4 id="真正的可移植性（Portability）"><a href="#真正的可移植性（Portability）" class="headerlink" title="真正的可移植性（Portability）"></a>真正的可移植性（Portability）</h4><p>Tensorflow 在CPU和GPU上运行，比如说可以运行在台式机、服务器、手机移动设备等等。想要在没有特殊硬件的前提下，在你的笔记本上跑一下机器学习的新想法？Tensorflow可以办到这点。准备将你的训练模型在多个CPU上规模化运算，又不想修改代码？Tensorflow可以办到这点。想要将你的训练好的模型作为产品的一部分用到手机app里？Tensorflow可以办到这点。你改变主意了，想要将你的模型作为云端服务运行在自己的服务器上，或者运行在Docker容器里？Tensorfow也能办到。Tensorflow就是这么拽 :)</p>
<h4 id="将科研和产品联系在一起"><a href="#将科研和产品联系在一起" class="headerlink" title="将科研和产品联系在一起"></a>将科研和产品联系在一起</h4><p>过去如果要将科研中的机器学习想法用到产品中，需要大量的代码重写工作。那样的日子一去不复返了！在Google，科学家用Tensorflow尝试新的算法，产品团队则用Tensorflow来训练和使用计算模型，并直接提供给在线用户。使用Tensorflow可以让应用型研究者将想法迅速运用到产品中，也可以让学术性研究者更直接地彼此分享代码，从而提高科研产出率。</p>
<h4 id="自动求微分"><a href="#自动求微分" class="headerlink" title="自动求微分"></a>自动求微分</h4><p>基于梯度的机器学习算法会受益于Tensorflow自动求微分的能力。作为Tensorflow用户，你只需要定义预测模型的结构，将这个结构和目标函数（objective function）结合在一起，并添加数据，Tensorflow将自动为你计算相关的微分导数。计算某个变量相对于其他变量的导数仅仅是通过扩展你的图来完成的，所以你能一直清楚看到究竟在发生什么。</p>
<h4 id="多语言支持"><a href="#多语言支持" class="headerlink" title="多语言支持"></a>多语言支持</h4><p>Tensorflow 有一个合理的c++使用界面，也有一个易用的python使用界面来构建和执行你的graphs。你可以直接写python/c++程序，也可以用交互式的ipython界面来用Tensorflow尝试些想法，它可以帮你将笔记、代码、可视化等有条理地归置好。当然这仅仅是个起点——我们希望能鼓励你创造自己最喜欢的语言界面，比如Go，Java，Lua，Javascript，或者是R。</p>
<h4 id="性能最优化"><a href="#性能最优化" class="headerlink" title="性能最优化"></a>性能最优化</h4><p>比如说你又一个32个CPU内核、4个GPU显卡的工作站，想要将你工作站的计算潜能全发挥出来？由于Tensorflow 给予了线程、队列、异步操作等以最佳的支持，Tensorflow 让你可以将你手边硬件的计算潜能全部发挥出来。你可以自由地将Tensorflow图中的计算元素分配到不同设备上，Tensorflow可以帮你管理好这些不同副本。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/deep-learning/">deep learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-tensorflow安装" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/tensorflow安装/" class="article-date">
      <time datetime="2017-06-20T07:13:34.064Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/tensorflow安装/">Installing TensorFlow with virtualenv</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><h3 id="Take-the-following-steps-to-install-TensorFlow-with-Virtualenv"><a href="#Take-the-following-steps-to-install-TensorFlow-with-Virtualenv" class="headerlink" title="Take the following steps to install TensorFlow with Virtualenv:"></a>Take the following steps to install TensorFlow with Virtualenv:</h3><h4 id="Install-pip-and-virtualenv-by-issuing-the-following-command"><a href="#Install-pip-and-virtualenv-by-issuing-the-following-command" class="headerlink" title="Install pip and virtualenv by issuing the following command:"></a>Install pip and virtualenv by issuing the following command:</h4><pre><code>$ sudo apt-get install python-pip python-dev python-virtualenv 
</code></pre><h4 id="Create-a-virtualenv-environment-by-issuing-the-following-command"><a href="#Create-a-virtualenv-environment-by-issuing-the-following-command" class="headerlink" title="Create a virtualenv environment by issuing the following command:"></a>Create a virtualenv environment by issuing the following command:</h4><pre><code>$ virtualenv --system-site-packages targetDirectory 
</code></pre><p>The targetDirectory specifies the top of the virtualenv tree. Our instructions assume that targetDirectory is ~/tensorflow, but you may choose any directory.</p>
<h4 id="Activate-the-virtualenv-environment-by-issuing-one-of-the-following-commands"><a href="#Activate-the-virtualenv-environment-by-issuing-one-of-the-following-commands" class="headerlink" title="Activate the virtualenv environment by issuing one of the following commands:"></a>Activate the virtualenv environment by issuing one of the following commands:</h4><pre><code>$ source ~/tensorflow/bin/activate # bash, sh, ksh, or zsh
$ source ~/tensorflow/bin/activate.csh  # csh or tcsh
</code></pre><p>The preceding source command should change your prompt to the following:</p>
<pre><code>(tensorflow)$ 
</code></pre><h4 id="Issue-one-of-the-following-commands-to-install-TensorFlow-in-the-active-virtualenv-environment"><a href="#Issue-one-of-the-following-commands-to-install-TensorFlow-in-the-active-virtualenv-environment" class="headerlink" title="Issue one of the following commands to install TensorFlow in the active virtualenv environment:"></a>Issue one of the following commands to install TensorFlow in the active virtualenv environment:</h4><pre><code>(tensorflow)$ pip install --upgrade tensorflow      # for Python 2.7
(tensorflow)$ pip3 install --upgrade tensorflow     # for Python 3.n
(tensorflow)$ pip install --upgrade tensorflow-gpu  # for Python 2.7 and GPU
(tensorflow)$ pip3 install --upgrade tensorflow-gpu # for Python 3.n and GPU
</code></pre><p>If the preceding command succeeds, skip Step 5. If the preceding command fails, perform Step 5.</p>
<h4 id="Optional-If-Step-4-failed-typically-because-you-invoked-a-pip-version-lower-than-8-1-install-TensorFlow-in-the-active-virtualenv-environment-by-issuing-a-command-of-the-following-format"><a href="#Optional-If-Step-4-failed-typically-because-you-invoked-a-pip-version-lower-than-8-1-install-TensorFlow-in-the-active-virtualenv-environment-by-issuing-a-command-of-the-following-format" class="headerlink" title="(Optional) If Step 4 failed (typically because you invoked a pip version lower than 8.1), install TensorFlow in the active virtualenv environment by issuing a command of the following format:"></a>(Optional) If Step 4 failed (typically because you invoked a pip version lower than 8.1), install TensorFlow in the active virtualenv environment by issuing a command of the following format:</h4><pre><code>(tensorflow)$ pip install --upgrade TF_PYTHON_URL   # Python 2.7
(tensorflow)$ pip3 install --upgrade TF_PYTHON_URL  # Python 3.N 
</code></pre><p>where TF_PYTHON_URL identifies the URL of the TensorFlow Python package. The appropriate value of TF_PYTHON_URLdepends on the operating system, Python version, and GPU support. Find the appropriate value for TF_PYTHON_URL for your system here. For example, if you are installing TensorFlow for Linux, Python 2.7, and CPU-only support, issue the following command to install TensorFlow in the active virtualenv environment:</p>
<pre><code>(tensorflow)$ pip3 install --upgrade \
 https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.0.1-cp34-cp34m-linux_x86_64.whl
</code></pre><p>If you encounter installation problems, see Common Installation Problems.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/deep-learning/">deep learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-sklearn中logistic回归的参数设置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/sklearn中logistic回归的参数设置/" class="article-date">
      <time datetime="2017-06-20T07:13:34.026Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/sklearn中logistic回归的参数设置/">sklern中logistic回归参数设置</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>原文出处：<a href="http://www.cnblogs.com/pinard/p/6035872.html，在原文的基础上做了一些修订" target="_blank" rel="external">http://www.cnblogs.com/pinard/p/6035872.html，在原文的基础上做了一些修订</a><br>sklearn中LogisticRegression的API如下，官方文档：<a href="http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html#sklearn.linear_model.LinearRegression" target="_blank" rel="external">http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html#sklearn.linear_model.LinearRegression</a></p>
<p>class sklearn.linear_model.LogisticRegression(penalty=’l2’, dual=False, tol=0.0001, C=1.0, fit_intercept=True, intercept_scaling=1, class_weight=None, random_state=None, solver=’liblinear’, max_iter=100, multi_class=’ovr’, verbose=0, warm_start=False, n_jobs=1)</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>　　　　在scikit-learn中，与逻辑回归有关的主要是这3个类。LogisticRegression， LogisticRegressionCV 和logistic_regression_path。其中LogisticRegression和LogisticRegressionCV的主要区别是LogisticRegressionCV使用了交叉验证来选择正则化系数C。而LogisticRegression需要自己每次指定一个正则化系数。除了交叉验证，以及选择正则化系数C以外， LogisticRegression和LogisticRegressionCV的使用方法基本相同。</p>
<p>　　　　logistic_regression_path类则比较特殊，它拟合数据后，不能直接来做预测，只能为拟合数据选择合适逻辑回归的系数和正则化系数。主要是用在模型选择的时候。一般情况用不到这个类，所以后面不再讲述logistic_regression_path类。</p>
<p>　　　　此外，scikit-learn里面有个容易让人误解的类RandomizedLogisticRegression,虽然名字里有逻辑回归的词，但是主要是用L1正则化的逻辑回归来做特征选择的，属于维度规约的算法类，不属于我们常说的分类算法的范畴。</p>
<p>　　　　后面的讲解主要围绕LogisticRegression和LogisticRegressionCV中的重要参数的选择来来展开，这些参数的意义在这两个类中都是一样的。</p>
<h2 id="正则化选择参数：penalty"><a href="#正则化选择参数：penalty" class="headerlink" title="正则化选择参数：penalty"></a>正则化选择参数：penalty</h2><p>　　　　LogisticRegression和LogisticRegressionCV默认就带了正则化项。penalty参数可选择的值为”l1”和”l2”.分别对应L1的正则化和L2的正则化，默认是L2的正则化。</p>
<p>　　　　在调参时如果我们主要的目的只是为了解决过拟合，一般penalty选择L2正则化就够了。但是如果选择L2正则化发现还是过拟合，即预测效果差的时候，就可以考虑L1正则化。另外，如果模型的特征非常多，我们希望一些不重要的特征系数归零，从而让模型系数稀疏化的话，也可以使用L1正则化。</p>
<p>　　　　penalty参数的选择会影响我们损失函数优化算法的选择。即参数solver的选择，如果是L2正则化，那么4种可选的算法{‘newton-cg’, ‘lbfgs’, ‘liblinear’, ‘sag’}都可以选择。但是如果penalty是L1正则化的话，就只能选择‘liblinear’了。这是因为L1正则化的损失函数不是连续可导的，而{‘newton-cg’, ‘lbfgs’,‘sag’}这三种优化算法时都需要损失函数的一阶或者二阶连续导数。而‘liblinear’并没有这个依赖。</p>
<p>　　　　具体使用了这4个算法有什么不同以及有什么影响我们下一节讲。</p>
<h2 id="优化算法选择参数：solver"><a href="#优化算法选择参数：solver" class="headerlink" title="优化算法选择参数：solver"></a>优化算法选择参数：solver</h2><p>　　　　solver参数决定了我们对逻辑回归损失函数的优化方法，有4种算法可以选择，分别是：</p>
<p>　　　　a) liblinear：使用了开源的liblinear库实现，内部使用了坐标轴下降法来迭代优化损失函数。</p>
<p>　　　　b) lbfgs：拟牛顿法的一种，利用损失函数二阶导数矩阵即海森矩阵来迭代优化损失函数。</p>
<p>　　　　c) newton-cg：也是牛顿法家族的一种，利用损失函数二阶导数矩阵即海森矩阵来迭代优化损失函数。</p>
<p>　　　　d) sag：即随机平均梯度下降，是梯度下降法的变种，和普通梯度下降法的区别是每次迭代仅仅用一部分的样本来计算梯度，适合于样本数据多的时候，SAG是一种线性收敛算法，这个速度远比SGD快。关于SAG的理解，参考博文线性收敛的随机优化算法之 SAG、SVRG（随机梯度下降）</p>
<p>　　　　从上面的描述可以看出，newton-cg, lbfgs和sag这三种优化算法时都需要损失函数的一阶或者二阶连续导数，因此不能用于没有连续导数的L1正则化，只能用于L2正则化。而liblinear通吃L1正则化和L2正则化。</p>
<p>　　　　同时，sag每次仅仅使用了部分样本进行梯度迭代，所以当样本量少的时候不要选择它，而如果样本量非常大，比如大于10万，sag是第一选择。但是sag不能用于L1正则化，所以当你有大量的样本，又需要L1正则化的话就要自己做取舍了。要么通过对样本采样来降低样本量，要么回到L2正则化。</p>
<p>In a nutshell, one may choose the solver with the following rules:</p>
<pre><code>| Case | Solver|
| ------------- |:-------------:|
| Small dataset or L1 penalty | “liblinear” |
| Multinomial loss or large dataset | centered |
| Very Large dataset | “sag” |
</code></pre><p>　　　　从上面的描述，大家可能觉得，既然newton-cg, lbfgs和sag这么多限制，如果不是大样本，我们选择liblinear不就行了嘛！错，因为liblinear也有自己的弱点！我们知道，逻辑回归有二元逻辑回归和多元逻辑回归。对于多元逻辑回归常见的有one-vs-rest(OvR)和many-vs-many(MvM)两种。而MvM一般比OvR分类相对准确一些。郁闷的是liblinear只支持OvR，不支持MvM，这样如果我们需要相对精确的多元逻辑回归时，就不能选择liblinear了。也意味着如果我们需要相对精确的多元逻辑回归不能使用L1正则化了。</p>
<p>总结而言，liblinear支持L1和L2，只支持OvR做多分类，“lbfgs”, “sag” “newton-cg”只支持L2，支持OvR和MvM做多分类。</p>
<p>　　　　具体OvR和MvM有什么不同我们下一节讲。</p>
<h2 id="分类方式选择参数：multi-class"><a href="#分类方式选择参数：multi-class" class="headerlink" title="分类方式选择参数：multi_class"></a>分类方式选择参数：multi_class</h2><p>　　　　multi_class参数决定了我们分类方式的选择，有 ovr和multinomial两个值可以选择，默认是 ovr。</p>
<p>　　　　ovr即前面提到的one-vs-rest(OvR)，而multinomial即前面提到的many-vs-many(MvM)。如果是二元逻辑回归，ovr和multinomial并没有任何区别，区别主要在多元逻辑回归上。</p>
<p>　　　　OvR的思想很简单，无论你是多少元逻辑回归，我们都可以看做二元逻辑回归。具体做法是，对于第K类的分类决策，我们把所有第K类的样本作为正例，除了第K类样本以外的所有样本都作为负例，然后在上面做二元逻辑回归，得到第K类的分类模型。其他类的分类模型获得以此类推。</p>
<p>　　　　而MvM则相对复杂，这里举MvM的特例one-vs-one(OvO)作讲解。如果模型有T类，我们每次在所有的T类样本里面选择两类样本出来，不妨记为T1类和T2类，把所有的输出为T1和T2的样本放在一起，把T1作为正例，T2作为负例，进行二元逻辑回归，得到模型参数。我们一共需要T(T-1)/2次分类。</p>
<p>　　　　从上面的描述可以看出OvR相对简单，但分类效果相对略差（这里指大多数样本分布情况，某些样本分布下OvR可能更好）。而MvM分类相对精确，但是分类速度没有OvR快。</p>
<p>　　　　如果选择了ovr，则4种损失函数的优化方法liblinear，newton-cg, lbfgs和sag都可以选择。但是如果选择了multinomial,则只能选择newton-cg, lbfgs和sag了。</p>
<h2 id="类型权重参数：-class-weight"><a href="#类型权重参数：-class-weight" class="headerlink" title="类型权重参数： class_weight"></a>类型权重参数： class_weight</h2><p>　　　　class_weight参数用于标示分类模型中各种类型的权重，可以不输入，即不考虑权重，或者说所有类型的权重一样。如果选择输入的话，可以选择balanced让类库自己计算类型权重，或者我们自己输入各个类型的权重，比如对于0,1的二元模型，我们可以定义class_weight={0:0.9, 1:0.1}，这样类型0的权重为90%，而类型1的权重为10%。</p>
<p>　　　　如果class_weight选择balanced，那么类库会根据训练样本量来计算权重。某种类型样本量越多，则权重越低，样本量越少，则权重越高。</p>
<p>sklearn的官方文档中，当class_weight为balanced时，类权重计算方法如下：</p>
<p>n_samples / (n_classes * np.bincount(y))，n_samples为样本数，n_classes为类别数量，np.bincount(y)会输出每个类的样本数，例如y=[1,0,0,1,1],则np.bincount(y)=[2,3]<br>　　　　那么class_weight有什么作用呢？在分类模型中，我们经常会遇到两类问题：</p>
<p>　　　　第一种是误分类的代价很高。比如对合法用户和非法用户进行分类，将非法用户分类为合法用户的代价很高，我们宁愿将合法用户分类为非法用户，这时可以人工再甄别，但是却不愿将非法用户分类为合法用户。这时，我们可以适当提高非法用户的权重。</p>
<p>　　　　第二种是样本是高度失衡的，比如我们有合法用户和非法用户的二元样本数据10000条，里面合法用户有9995条，非法用户只有5条，如果我们不考虑权重，则我们可以将所有的测试集都预测为合法用户，这样预测准确率理论上有99.95%，但是却没有任何意义。这时，我们可以选择balanced，让类库自动提高非法用户样本的权重。</p>
<p>　　　　提高了某种分类的权重，相比不考虑权重，会有更多的样本分类划分到高权重的类别，从而可以解决上面两类问题。</p>
<p>　　　　当然，对于第二种样本失衡的情况，我们还可以考虑用下一节讲到的样本权重参数： sample_weight，而不使用class_weight。sample_weight在下一节讲。</p>
<h2 id="样本权重参数：-sample-weight"><a href="#样本权重参数：-sample-weight" class="headerlink" title="样本权重参数： sample_weight"></a>样本权重参数： sample_weight</h2><p>　　　　上一节我们提到了样本不失衡的问题，由于样本不平衡，导致样本不是总体样本的无偏估计，从而可能导致我们的模型预测能力下降。遇到这种情况，我们可以通过调节样本权重来尝试解决这个问题。调节样本权重的方法有两种，第一种是在class_weight使用balanced。第二种是在调用fit函数时，通过sample_weight来自己调节每个样本权重。</p>
<p>　　　　在scikit-learn做逻辑回归时，如果上面两种方法都用到了，那么样本的真正权重是class_weight*sample_weight.</p>
<p>　　　　以上就是scikit-learn中逻辑回归类库调参的一个小结，还有些参数比如正则化参数C（交叉验证就是 Cs），迭代次数max_iter等，由于和其它的算法类库并没有特别不同，这里不多累述了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/regression/">regression</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-maven的安装配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/maven的安装配置/" class="article-date">
      <time datetime="2017-06-20T07:13:34.000Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/maven的安装配置/">Maven安装配置</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>想要安装 Apache Maven 在Windows 系统上, 需要下载 Maven 的 zip 文件，并将其解压到你想安装的目录，并配置 Windows 环境变量。</p>
<p>所需工具：</p>
<ol>
<li>JDK 1.8</li>
<li>Maven 3.3.3</li>
<li>Windows 7</li>
</ol>
<h3 id="JDK-和-JAVA-HOME"><a href="#JDK-和-JAVA-HOME" class="headerlink" title="JDK 和 JAVA_HOME"></a>JDK 和 JAVA_HOME</h3><p>确保已安装JDK，并 “JAVA_HOME” 变量已加入到 Windows 环境变量。 </p>
<h3 id="下载Apache-Maven"><a href="#下载Apache-Maven" class="headerlink" title="下载Apache Maven"></a>下载Apache Maven</h3><p>访问 Maven官方网站 <a href="http://maven.apache.org/download.cgi" target="_blank" rel="external">http://maven.apache.org/download.cgi</a> ，打开后找到下载链接，下载 Maven的zip文件，例如： apache-maven-3.3.9-bin.zip，将它解压到你要安装Maven的文件夹。</p>
<p>假设你解压缩到文件夹 –  D:\software\yiibai.com\apache-maven </p>
<h3 id="添加M2-HOME和MAVEN-HOME"><a href="#添加M2-HOME和MAVEN-HOME" class="headerlink" title="添加M2_HOME和MAVEN_HOME"></a>添加M2_HOME和MAVEN_HOME</h3><p>添加M2_HOME和MAVEN_HOME环境变量到Windows环境变量，并将其指向你的 Maven文件夹。 </p>
<h4 id="M2-HOME-或-MAVEN-HOME"><a href="#M2-HOME-或-MAVEN-HOME" class="headerlink" title="M2_HOME 或 MAVEN_HOME"></a>M2_HOME 或 MAVEN_HOME</h4><p>Maven说只是添加M2_HOME, 但一些项目仍引用Maven的文件夹MAVEN_HOME, 因此，为了安全也把它添加进去。</p>
<h3 id="添加到环境变量-PATH"><a href="#添加到环境变量-PATH" class="headerlink" title="添加到环境变量 - PATH"></a>添加到环境变量 - PATH</h3><p>更新PATH变量，添加 Maven bin文件夹到PATH的最后，如：%M2_HOME%\bin, 这样就可以在命令中的任何目录下运行Maven命令了。 </p>
<h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><p>完成，以验证它，执行 mvn –version 在命令提示符下，如下图输出结果：</p>
<pre><code>C:\Users\Administrator&gt;mvn -version
Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T19:57:3
7+08:00)
Maven home: D:\software\yiibai.com\apache-maven
Java version: 1.8.0_40, vendor: Oracle Corporation
Java home: D:\Program Files\Java\jdk1.8.0_40
Default locale: zh_CN, platform encoding: GBK
OS name: &quot;windows 7&quot;, version: &quot;6.1&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;
</code></pre><p>如果你看到类似消息，说明 Apache Maven 在 Windows 上已安装成功。 </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-map排序" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/map排序/" class="article-date">
      <time datetime="2017-06-20T07:13:33.994Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/map排序/">map排序</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <pre><code>List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;Map.Entry&lt;String, Integer&gt;&gt;(hotGameMap.entrySet());
Collections.sort(list, new Comparator&lt;Map.Entry&lt;String, Integer&gt;&gt;() {// 降序排序
public int compare(Entry&lt;String, Integer&gt; o1, Entry&lt;String, Integer&gt; o2) {
    return o2.getValue().compareTo(o1.getValue());
    }
});
hotGameMap.clear();
for(Map.Entry&lt;String,Integer&gt; mapping:list){
hotGameMap.put(mapping.getKey(), mapping.getValue());
} 
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-LogisticRegression" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/LogisticRegression/" class="article-date">
      <time datetime="2017-06-20T07:13:33.987Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/LogisticRegression/">LogisticRegression</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h2><p>这里使用uci上的开源数据集</p>
<h3 id="数据介绍："><a href="#数据介绍：" class="headerlink" title="数据介绍："></a>数据介绍：</h3><p>这可能是模式识别文献中最知名的数据库。费雪的论文是这个领域的经典，到今天还经常被引用。 数据集包含3个类，每个类包含50个实例，其中每个类都指一种类型的鸢尾花。一类与另外一类线性分离2;后者不能彼此线性分离。<br>预测属性： 鸢尾花类别.<br>这是一个非常简单的领域。<br>该数据与Fishers文章（由Steve Chadwick，spchadwick’@ espeedaz.net确定）中提供的数据不同。第35个样本应为：4.9,3.1,1.5,0.2，“Iris-setosa”，其中错误在第四个特征。第38个样本：4.9,3.6,1.4,0.1，“Iris-setosa”，其中错误在第二和第三个特征。</p>
<h3 id="属性信息："><a href="#属性信息：" class="headerlink" title="属性信息："></a>属性信息：</h3><pre><code>sepal length: 萼片长度（厘米）
sepal width: 萼片宽度（厘米）
petal length: 花瓣长度（厘米）
petal width: 花瓣宽度（厘米）
类别：
- Setosa
- Versicolour
- Virginica
</code></pre><h3 id="数据下载："><a href="#数据下载：" class="headerlink" title="数据下载："></a>数据下载：</h3><p><a href="https://archive.ics.uci.edu/ml/machine-learning-databases/iris/" target="_blank" rel="external">https://archive.ics.uci.edu/ml/machine-learning-databases/iris/</a></p>
<h2 id="问题模型"><a href="#问题模型" class="headerlink" title="问题模型"></a>问题模型</h2><p>为了方便展示，我们只使用数据中的前两个特征，并且只使用setosa和versicolour两个类别的数据。我们的问题是得到一个sigmoid函数，利用这个函数可以区分出两种类别的鸢尾花。</p>
<p><img src="http://chart.googleapis.com/chart?cht=tx&chl=z%20%3D%20%5Ctheta_%7B0%7D%20%2B%20%5Ctheta%20_%7B1%7D%5Ctimes%20sepal_%7Blength%7D%20%2B%20%5Ctheta%20_%7B2%7D%20%5Ctimes%20sepal_%7Bwidth%7D" style="border:none;"></p>
<p><img src="http://chart.googleapis.com/chart?cht=tx&chl=h(z)%3D%5Cfrac%7B1%7D%7B1%2Be%5E%7B-z%7D%7D" style="border:none;"></p>
<p>而需要学习的，就是<img src="http://chart.googleapis.com/chart?cht=tx&chl=%5Ctheta%20_%7B0%7D%2C%20%5Ctheta%20_%7B1%7D%2C%20%5Ctheta%20_%7B2%7D" style="border:none;">这3个参数。 </p>
<h2 id="数据清洗"><a href="#数据清洗" class="headerlink" title="数据清洗"></a>数据清洗</h2><p>打开第一节中的数据下载链接，将iris.data的数据保存为csv文件，我们会使用这个csv格式的文件进行logistic回归。<br>因为这个csv格式中没有非法数据，我们不需要进行预处理操作。<br>备注：数据的标准化操作会在sklearn中进行，不需要我们另外进行标准化。</p>
<h2 id="用Pandas读数据"><a href="#用Pandas读数据" class="headerlink" title="用Pandas读数据"></a>用Pandas读数据</h2><h3 id="导库"><a href="#导库" class="headerlink" title="导库"></a>导库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 导入需要使用的几个库</div><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line">import pandas as pd</div><div class="line">from sklearn.linear_model import LogisticRegression</div><div class="line">from sklearn.cross_validation import train_test_split</div></pre></td></tr></table></figure>
<h3 id="使用pandas读取数据"><a href="#使用pandas读取数据" class="headerlink" title="使用pandas读取数据"></a>使用pandas读取数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># 加载Iris数据集作为DataFrame对象</div><div class="line">df = pd.read_csv(&apos;iris.data&apos;, header=None)</div><div class="line">print df</div></pre></td></tr></table></figure>
<pre><code># 我们的目的就是训练出一个模型，给定&apos;sepal length&apos;, &apos;sepal width&apos;数据后，预测出鸢尾花的类型
</code></pre><h2 id="划分训练集和测试集"><a href="#划分训练集和测试集" class="headerlink" title="划分训练集和测试集"></a>划分训练集和测试集</h2><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 取出2个特征，并把它们用Numpy数组表示</div><div class="line">X = df.iloc[:100, [0, 2]].values</div><div class="line">Y = df.iloc[:100, 4].values	</div><div class="line">X_train, X_test, Y_train, Y_test = train_test_split(X,Y,test_size=0.3,random_state=0)</div></pre></td></tr></table></figure>
</code></pre><h2 id="数据展示"><a href="#数据展示" class="headerlink" title="数据展示"></a>数据展示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 利用matplotlib将数据在图中展现出来</div><div class="line">plt.scatter(X[:50, 0], X[:50, 1],color=&apos;red&apos;, marker=&apos;^&apos;, label=&apos;setosa&apos;)</div><div class="line">plt.scatter(X[50:100, 0], X[50:100, 1],color=&apos;blue&apos;, marker=&apos;x&apos;, label=&apos;versicolor&apos;)</div><div class="line"># plt.scatter(X[100:, 0], X[100:, 1],color=&apos;green&apos;, marker=&apos;+&apos;, label=&apos;Virginica&apos;)</div><div class="line">plt.xlabel(&apos;petal length&apos;)</div><div class="line">plt.ylabel(&apos;sepal length&apos;)</div><div class="line"># 把说明放在左上角，具体请参考官方文档</div><div class="line">plt.legend(loc=2)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="数据标准化"><a href="#数据标准化" class="headerlink" title="数据标准化"></a>数据标准化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># 为了追求机器学习和最优化算法的最佳性能，我们将特征缩放</div><div class="line">from sklearn.preprocessing import StandardScaler</div><div class="line">sc = StandardScaler()</div><div class="line"># 估算每个特征的平均值和标准差</div><div class="line">sc.fit(X_train)</div><div class="line"></div><div class="line"># print sc.mean_</div><div class="line"># print sc.scale_</div><div class="line"></div><div class="line"># 注意：这里我们要用同样的参数来标准化测试集，使得测试集和训练集之间有可比性</div><div class="line">X_train_std = sc.transform(X_train)</div><div class="line">X_test_std = sc.transform(X_test)</div></pre></td></tr></table></figure>
<h2 id="模型构建"><a href="#模型构建" class="headerlink" title="模型构建"></a>模型构建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">lr = LogisticRegression(C=1000.0, random_state=0, penalty=&apos;l2&apos;)</div><div class="line">lr.fit(X_train_std, Y_train)</div></pre></td></tr></table></figure>
<p>拟合完毕后，我们看看我们的需要的模型系数结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># 打印偏置项和各特征权重</div><div class="line">print lr.intercept_</div><div class="line">print lr.coef_</div></pre></td></tr></table></figure>
<p>###输出结果为：</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[ 2.54973732]</div><div class="line">[[ -0.93280168  12.40529916]]</div></pre></td></tr></table></figure>
</code></pre><p>因此我们得到了步骤2中所需的3个参数，可以得到如下关系：</p>
<p><img src="http://chart.googleapis.com/chart?cht=tx&chl=z%3D2.54973732-0.93280168%5Ctimes%20sepal_%7Blength%7D%20%2B%2012.40529916%5Ctimes%20sepal_%7Bwidth%7D" style="border:none;"></p>
<p><img src="http://chart.googleapis.com/chart?cht=tx&chl=h(z)%3D%5Cfrac%7B1%7D%7B1%2Be%5E%7B-z%7D%7D" style="border:none;"></p>
<h2 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># 得出测试数据属于setosa和versicolour的概率</div><div class="line">y_hat_prob = lr.predict_proba(X_test_std)</div><div class="line">print y_hat_prob</div></pre></td></tr></table></figure>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[[  9.99519133e-01   4.80867345e-04]</div><div class="line"> [  7.34532569e-08   9.99999927e-01]</div><div class="line"> [  9.99942289e-01   5.77106095e-05]</div><div class="line"> [	...				 ...		   ]</div><div class="line"> [  8.82184814e-08   9.99999912e-01]</div><div class="line"> [  8.32854787e-07   9.99999167e-01]</div><div class="line"> [  9.18305501e-04   9.99081694e-01]]</div></pre></td></tr></table></figure>
</code></pre><p>其中第一列为测试样本属于setosa的概率，第二列为属于versicolour的概率，哪一个值大我们就认为这个样本属于这一类的概率更大。</p>
<h2 id="准确率计算"><a href="#准确率计算" class="headerlink" title="准确率计算"></a>准确率计算</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">np.set_printoptions(suppress=True)</div><div class="line"># print &apos;y_hat_prob = \n&apos;, y_hat_prob</div><div class="line">print u&apos;准确度：%.2f%%&apos; % (100*np.mean(predict_result == Y_test.ravel()))</div></pre></td></tr></table></figure>
<h2 id="解决多分类问题"><a href="#解决多分类问题" class="headerlink" title="解决多分类问题"></a>解决多分类问题</h2><p>用Logistic回归处理多分类问题，一种简单的方法是一对所有（one-Versus-All，OVA），给定m个类，训练m个二元分类器(将选取任意一类，再将其它所有类看成是一类，构建一个两类分类器)。分类器j使类j的元组为正类，其余为负类，进行训练。为了对未知元组X进行分类，分类器作为一个组合分类器投票。例如，如果分类器j预测X为正类，则类j得到一票。如果他测得X为正类，则类j得到一票。如果测X为负类，则除j以外的每一个类都得到一票（相当于此类的票数减一）。得票最多的指派给X。<br>这种方法简单有效，而且使用类似logistic这种有概率值大小可以比较的情况下，类边界其实是个有范围的值，可以增加正确率。而且当K(类别数量)很大时，通过投票的方式解决了一部分不平衡性问题。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/regression/">regression</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-log" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/20/log/" class="article-date">
      <time datetime="2017-06-20T07:13:33.978Z" itemprop="datePublished">2017-06-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/20/log/">java log的使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Java中给项目程序添加log"><a href="#Java中给项目程序添加log" class="headerlink" title="Java中给项目程序添加log"></a>Java中给项目程序添加log</h2><ol>
<li>使用JDK中的java.util.logging包，Java.util.logging，JDK标准库中的类，是JDK 1.4 版本之后添加的日志记录的功能包。</li>
<li>使用log4j包，log4j是apache软件基金会的开源项目。log4j，最强大的记录日志的方式。可以通过配置 .properties 或是 .xml 的文件， 配置日志的目的地，格式等等。</li>
</ol>
<h3 id="java-util-logging"><a href="#java-util-logging" class="headerlink" title="java.util.logging"></a>java.util.logging</h3><p>【例1.1】：日志的简单使用</p>
<pre><code>import java.util.logging.Logger;
public class LogDemo1 {
    static String strClassName = LogDemo1.class.getName();  
    static Logger logger = Logger.getLogger(strClassName);  

    public static double division(int value1, int value2) {  
        double result = 0;  
        try {  
            result = value1 / value2;  
        } catch(ArithmeticException e) {  
            logger.warning(&quot;除数不能为0&quot;);  
            logger.info(&quot;i am info&quot;);
            logger.severe(&quot;i am severe&quot;);
            e.printStackTrace();  
        }  
        return result;  
    }  

    public static void main(String[] args) {  
        System.out.println(division(5, 0));  
    } 
}
</code></pre><p>【例1.2】：日志的级别</p>
<pre><code>public static double division(int value1, int value2) {  
    double result = 0;  
    try {  
        result = value1 / value2;  
    } catch(ArithmeticException e) {  
        logger.severe(&quot;[severe]除数不能为0.&quot;);  
        logger.warning(&quot;[warning]除数不能为0.&quot;);  
        logger.info(&quot;[info]除数不能为0.&quot;);  
        logger.config(&quot;[config]除数不能为0.&quot;);  
        logger.fine(&quot;[fine]除数不能为0.&quot;);  
        logger.finer(&quot;[finer]除数不能为0.&quot;);  
        logger.finest(&quot;[finest]除数不能为0.&quot;);  
        e.printStackTrace();  
    }  
    return result;  
}  
</code></pre><h3 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h3><ol>
<li>新建一个JAva工程，导入包log4j-1.2.17.jar.</li>
<li><p>src同级创建并设置log4j.properties,</p>
<pre><code>### 设置 ###
log4j.rootLogger = debug,stdout,D,E

### 输出信息到控制抬 ###
log4j.appender.stdout = org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target = System.out
log4j.appender.stdout.layout = org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern = [%-5p] %d{yyyy-MM-dd HH:mm:ss,SSS} method:%l%n%m%n

### 输出DEBUG 级别以上的日志到=E://logs/error.log ###
log4j.appender.D = org.apache.log4j.DailyRollingFileAppender
log4j.appender.D.File = E://logs/log.log
log4j.appender.D.Append = true
log4j.appender.D.Threshold = DEBUG 
log4j.appender.D.layout = org.apache.log4j.PatternLayout
log4j.appender.D.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss}  [ %t:%r ] - [ %p ]  %m%n

### 输出ERROR 级别以上的日志到=E://logs/error.log ###
log4j.appender.E = org.apache.log4j.DailyRollingFileAppender
log4j.appender.E.File =E://logs/error.log 
log4j.appender.E.Append = true
log4j.appender.E.Threshold = ERROR 
log4j.appender.E.layout = org.apache.log4j.PatternLayout
log4j.appender.E.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss}  [ %t:%r ] - [ %p ]  %m%n
</code></pre></li>
<li><p>设置log4j</p>
<pre><code>package cn.edu.hdu.demo;

import org.apache.log4j.Logger;

public class LogDemo2 {
    public static Logger logger = Logger.getLogger(LogDemo2.class);
    public static void main(String[] args) {
        System.out.println(&quot;This is log4j:&quot;);
        double result = 0;  
        try {  
            result = 4 / 0;  
        } catch(ArithmeticException e) {  
            logger.debug(&quot;i am debug&quot;);
            logger.error(&quot;i am error&quot;);
            logger.info(&quot;i am info&quot;);
        }  
    }
}
</code></pre></li>
<li>打印内容</li>
<li><pre><code>2017-01-11 21:04:13  [ main:2 ] - [ ERROR ]  i am error
2017-01-11 21:04:13  [ main:0 ] - [ DEBUG ]  i am debug
2017-01-11 21:04:13  [ main:2 ] - [ ERROR ]  i am error
2017-01-11 21:04:13  [ main:2 ] - [ INFO ]  i am info
</code></pre></li>
</ol>
<h2 id="log4j的基本使用方法"><a href="#log4j的基本使用方法" class="headerlink" title="log4j的基本使用方法"></a>log4j的基本使用方法</h2><p>Log4j由三个重要的组件构成：日志信息的优先级，日志信息的输出目的地，日志信息的输出格式。日志信息的优先级从高到低有ERROR、WARN、 INFO、DEBUG，分别用来指定这条日志信息的重要程度；日志信息的输出目的地指定了日志将打印到控制台还是文件中；而输出格式则控制了日志信息的显 示内容。</p>
<h3 id="定义配置文件"><a href="#定义配置文件" class="headerlink" title="定义配置文件"></a>定义配置文件</h3><p>其实您也可以完全不使用配置文件，而是在代码中配置Log4j环境。但是，使用配置文件将使您的应用程序更加灵活。Log4j支持两种配置文件格式，一种是XML格式的文件，一种是Java特性文件（键=值）。下面我们介绍使用Java特性文件做为配置文件的方法：</p>
<h4 id="配置根Logger，其语法为："><a href="#配置根Logger，其语法为：" class="headerlink" title="配置根Logger，其语法为："></a>配置根Logger，其语法为：</h4><pre><code>log4j.rootLogger = [ level ] , appenderName, appenderName, …
</code></pre><p>其中，level 是日志记录的优先级，分为OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL或者您定义的级别。Log4j建议只使用四个级别，优 先级从高到低分别是ERROR、WARN、INFO、DEBUG。通过在这里定义的级别，您可以控制到应用程序中相应级别的日志信息的开关。比如在这里定 义了INFO级别，则应用程序中所有DEBUG级别的日志信息将不被打印出来。 appenderName就是指B日志信息输出到哪个地方。您可以同时指定多个输出目的地。</p>
<h4 id="配置日志信息输出目的地Appender，其语法为："><a href="#配置日志信息输出目的地Appender，其语法为：" class="headerlink" title="配置日志信息输出目的地Appender，其语法为："></a>配置日志信息输出目的地Appender，其语法为：</h4><pre><code>log4j.appender.appenderName = fully.qualified.name.of.appender.class  
log4j.appender.appenderName.option1 = value1  
…  
log4j.appender.appenderName.option = valueN
</code></pre><p>其中，Log4j提供的appender有以下几种：</p>
<pre><code>org.apache.log4j.ConsoleAppender（控制台），  
org.apache.log4j.FileAppender（文件），  
org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件），  
.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件），  
org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）
</code></pre><h4 id="配置日志信息的格式（布局），其语法为："><a href="#配置日志信息的格式（布局），其语法为：" class="headerlink" title="配置日志信息的格式（布局），其语法为："></a>配置日志信息的格式（布局），其语法为：</h4><pre><code>log4j.appender.appenderName.layout = fully.qualified.name.of.layout.class  
log4j.appender.appenderName.layout.option1 = value1  
…  
log4j.appender.appenderName.layout.option = valueN
</code></pre><p>其中，Log4j提供的layout有以e几种：</p>
<pre><code>org.apache.log4j.HTMLLayout（以HTML表格形式布局），  
org.apache.log4j.PatternLayout（可以灵活地指定布局模式），  
org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串），  
org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等等信息）
</code></pre><p>Log4J采用类似C语言中的printf函数的打印格式格式化日志信息，打印参数如下： %m 输出代码中指定的消息</p>
<pre><code>%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL  
%r 输出自应用启动到输出该log信息耗费的毫秒数  
%c 输出所属的类目，通常就是所在类的全名  
%t 输出产生该日志事件的线程名  
%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”  
%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy MMM dd HH:mm:ss,SSS}，输出类似：2002年10月18日 22：10：28，921  
%l 输出日志事件的发生位置，包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10)
</code></pre><h3 id="在代码中使用Log4j"><a href="#在代码中使用Log4j" class="headerlink" title="在代码中使用Log4j"></a>在代码中使用Log4j</h3><h4 id="得到记录器"><a href="#得到记录器" class="headerlink" title="得到记录器"></a>得到记录器</h4><p>使用Log4j，第一步就是获取日志记录器，这个记录器将负责控制日志信息。其语法为：</p>
<pre><code>public static Logger getLogger( String name)
</code></pre><p>通过指定的名字获得记录器，如果必要的话，则为这个名字创建一个新的记录器。Name一般取本类的名字，比如：</p>
<pre><code>static Logger logger = Logger.getLogger ( ServerWithLog4j.class.getName () )
</code></pre><h4 id="读取配置文件"><a href="#读取配置文件" class="headerlink" title="读取配置文件"></a>读取配置文件</h4><p>当获得了日志记录器之后，第二步将配置Log4j环境，其语法为：</p>
<pre><code>BasicConfigurator.configure ()： 自动快速地使用缺省Log4j环境。  
PropertyConfigurator.configure ( String configFilename) ：读取使用Java的特性文件编写的配置文件。  
DOMConfigurator.configure ( String filename ) ：读取XML形式的配置文件。
</code></pre><h4 id="插入记录信息（格式化日志信息）"><a href="#插入记录信息（格式化日志信息）" class="headerlink" title="插入记录信息（格式化日志信息）"></a>插入记录信息（格式化日志信息）</h4><p>当上两个必要步骤执行完毕，您就可以轻松地使用不同优先级别的日志记录语句插入到您想记录日志的任何地方，其语法如下：</p>
<pre><code>Logger.debug ( Object message ) ;  
Logger.info ( Object message ) ;  
Logger.warn ( Object message ) ;      
Logger.error ( Object message ) ;
</code></pre><h3 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h3><p>每个Logger都被了一个日志级别（log level），用来控制日志信息的输出。日志级别从高到低分为：</p>
<pre><code>A：off 最高等级，用于关闭所有日志记录。
B：fatal 指出每个严重的错误事件将会导致应用程序的退出。
C：error 指出虽然发生错误事件，但仍然不影响系统的继续运行。
D：warm 表明会出现潜在的错误情形。
E：info 一般和在粗粒度级别上，强调应用程序的运行全程。
F：debug 一般用于细粒度级别上，对调试应用程序非常有帮助。
G：all 最低等级，用于打开所有日志记录。
</code></pre><p>上面这些级别是定义在org.apache.log4j.Level类中。Log4j只建议使用4个级别，优先级从高到低分别是error,warn,info和debug。通过使用日志级别，可以控制应用程序中相应级别日志信息的输出。例如，如果使用b了info级别，则应用程序中所有低于info级别的日志信息(如debug)将不会被打印出来。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 wiyee
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>